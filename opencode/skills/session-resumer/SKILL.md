---
name: session-resumer
description: 作業の区切りで「覚えて」「保存して」と言われたら、現在の状態を保存して続き用プロンプトを作成する。MUST USE when user says "覚えて" or "保存して" at task boundaries.
user-invocable: true
disable-model-invocation: false
license: MIT
compatibility: opencode,claude
metadata:
  audience: すべてのユーザー
  workflow: 作業の区切りでユーザーが「覚えて」「保存して」「続き準備」と言ったら自動起動
---

# Session Resumer

## 目的

作業の区切りで現在の状態を保存し、次のセッションで続きを開始するためのプロンプトを自動生成する。

## 起動条件

ユーザーが以下のいずれかの指示をした場合に起動する：

### 短い起動ワード（推奨）
- `覚えて`
- `保存して`
- `続き準備`

### 文脈での起動
- 「作業内容を覚えておいて」
- 「続きのプロンプトを作成して」
- 「保存して続きのプロンプトを」

## 動作フロー

### 1. 現在の状態を収集

以下の情報を会話から抽出する：

- **完了した作業**: どのセクション/機能を実装したか
- **現在の位置**: どのファイルのどの行まで作業したか
- **次のステップ**: 何をするつもりか
- **関連ファイル**: 作業対象のファイルパス
- **構成案**: 次に行う作業の計画
- **文体要件**: だ・である調、学生らしい、など
- **技術的詳細**: 参考すべきコード、実装のポイント

### 2. 保存処理（memory-saver）

以下の形式で保存：

```yaml
---
title: [タイトル]
date: [日時]
topics:
  - [トピック]
summary: [要約]
---

# 現在の状態

## 完了した作業
[完了した内容]

## 次のステップ
[次の作業内容]

## 関連ファイル
- [ファイルパス]

## 構成案
[構成]

## 技術的詳細
[実装のポイント]
```

### 3. 続き用プロンプトの出力

次のセッションでコピー＆ペーストして使えるプロンプトを生成：

```
[作業名]の続きです。前回は[完了した作業]を行いました。

今回は[次のステップ]を行います。

## 構成案

```
[構成]
```

## 方針

- [方針1]
- [方針2]

## 文体要件

- [要件]

## 関連ファイル

- [ファイル]

[次の作業]について議論していきます。
```

## 入力パラメータ

| パラメータ | 説明 | 必須 |
|-----------|------|------|
| 作業内容 | 完了した作業の説明 | ◯ |
| 次のステップ | 次に行う作業の内容 | ◯ |
| 構成案 | 次の作業の構成（あれば） | - |
| 関連ファイル | 作業対象のファイル | - |
| 文体要件 | 特別な文体の指定があれば | - |
| 技術的詳細 | 参考すべきコードなど | - |

## 注意点

1. **保存先**: `~/.config/opencode/memories/YYYY-MM-DD_HH-MM-SS_[トピック].md`
2. **プロンプト形式**: コピー＆ペーストで使えるように整形する
3. **情報量**: 次のセッションでスムーズに再開できる程度の詳細を含める
4. **文脈保持**: なぜその方針を選んだか、試行錯誤の経緯なども記録する

## 使用例

### 入力
```
レポート改善の続きです。前回は4.0「コード生成の基盤仕組み」を追加しました。
今回は4.1「算術演算のコード生成」の詳細化を行います。

作業内容を覚えておいて、続きのプロンプトを作成してください。
```

### 出力
1. `~/.config/opencode/memories/2026-02-02_13-43-33_レポート改善-4.0完成状態.md` に保存
2. 次のセッション用のプロンプトを出力

## 連携スキル

- **memory-saver**: 保存処理の実行に使用

## 制約

- 保存時に失敗した場合はエラーを報告し、プロンプト生成を続行するか確認する
- 関連ファイルのパスは絶対パスまたはプロジェクトルートからの相対パスで記録する
